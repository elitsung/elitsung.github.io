<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>{{ page.title }}{% if page.title %} · {% endif %}{{ site.title }}</title>
  <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@400;500&display=swap" rel="stylesheet">
  <style>
    @keyframes wiggle {
      0%, 100% { transform: rotate(0deg); }
      25% { transform: rotate(2deg); }
      50% { transform: rotate(-2deg); }
      75% { transform: rotate(1deg); }
    }
    body { 
      font-family: "IBM Plex Mono", ui-monospace, SFMono-Regular, Menlo, Consolas, monospace;
      max-width: 900px;
      margin: 2rem auto;
      line-height: 1.6;
      background-color: #fff;
      color: #111;
    }
    a { 
      color: blue; 
      text-decoration: underline;
     }
    nav ul { 
      list-style: disc; 
      padding-left: 1.25rem;
     }
    header h1 { 
      margin-bottom: 0.5rem; 
      font-weight: 500; 
    }
    header h1 a {
      color: blue;
      text-decoration: underline;
      font-style: normal;
      transition: font-style 0.1s ease;
    }
    img { 
      max-width: 100%; 
      height: auto; 
    }
    figure { 
      margin: 0 0 2rem 0; 
    }
    figcaption { 
      font-size: 0.9em; 
      opacity: 0.7; 
    }
    header h1 a:hover,
    .page-divider {
      border: none;
      border-top: 1px solid rgba(0, 0, 0, 0.15);
      margin: 1.5rem auto 2rem auto;
      width: 100%;
    }
    /* top bar stays inline & left-aligned */
    .nav-inline { text-align:left; color:blue; font-size:1rem; letter-spacing:.3px; }
    .sep { color:blue; margin:0 .35rem; }

    /* links */
    .nav-link { color:blue; text-decoration:underline; font-style:normal; transition:font-style .1s ease; }
    .nav-link:hover { text-decoration:none; font-style:italic; }

    /* parent is inline, subtree drops under it */
    .nav-parent { position:relative; display:inline-block; }

    /* panel under the word (centered under it) */
    .nav-parent .nav-tree {
      position:absolute;
      left:50%;
      transform: translateX(-50%);
      margin-top:.4rem;
      padding-left:.75rem;
      border-left:1px solid rgba(0,0,0,.18);   /* the vertical tree line */
      text-align:left;
      background:transparent;
    }

    /* no bullets */
    .nav-parent .nav-tree ul { margin:0; padding:0; list-style:none; }
    .nav-parent .nav-tree li { margin:.25rem 0; }

    /* optional: tiny indent for deeper levels */
    .nav-parent .nav-tree .nav-parent .nav-tree { margin-left:1rem; }
  </style>
</head>
<body>

  {% if page.banner_image %}
  <div class="banner-image">
    <img src="{{ page.banner_image }}" alt="">
    {% if page.banner_text %}
      <div class="banner-text">{{ page.banner_text }}</div>
    {% endif %}
  </div>
  {% endif %}

  <header>
    <h1><a href="/">{{ site.title }}</a></h1>
    <nav class="nav-inline">
      {% for item in site.data.nav %}
        {% include tree_item.html item=item %}
        {% unless forloop.last %}<span class="sep"> ✱ </span>{% endunless %}
      {% endfor %}
    </nav>
    <div id="nav-tree-container"></div>
  </header>
  <hr class="page-divider">
  <main>
    {{ content }}
  </main>
<script>
document.addEventListener('DOMContentLoaded', () => {
  const parents = document.querySelectorAll('.nav-parent > .has-children');
  function closeAll(except) {
    document.querySelectorAll('.nav-parent .nav-tree').forEach(t => {
      if (t !== except) t.hidden = true;
    });
  }
  parents.forEach(a => {
    a.addEventListener('click', (e) => {
      // regular click toggles; modifier-click still navigates
      if (e.metaKey || e.ctrlKey || e.shiftKey || e.altKey || e.button === 1) return;
      e.preventDefault();
      const tree = a.nextElementSibling;
      const willOpen = tree.hidden;
      closeAll(tree);
      tree.hidden = !willOpen ? true : false;
    });
  });
  // click outside closes
  document.addEventListener('click', (e) => {
    if (!e.target.closest('.nav-inline')) closeAll(null);
  });
});
</script>
</body>
</html>